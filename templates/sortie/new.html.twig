{% extends 'base.html.twig' %}

{% block title %}Créer une Sortie{% endblock %}

{% block body %}
    <form action="">

{#        <SELECT NAME="Rubrique" onChange='Choix(this.form)'>#}
{#            <OPTION>-- Choisissez une rubrique ---</OPTION>#}
{#            <OPTION>Plongée</OPTION>#}
{#            <OPTION>Nucléaire</OPTION>#}
{#            <OPTION>Bonheur</OPTION>#}
{#        </SELECT>#}
{#        <SELECT NAME="Page">#}
{#            <OPTION>-- Choisissez une page ---</OPTION>#}
{#            <OPTION></OPTION>#}
{#            <OPTION></OPTION>#}
{#            <OPTION></OPTION>#}
{#        </SELECT>#}



    <SELECT NAME="Rubrique" onChange='Choix(this.form)'>
        <OPTION>-- Choisissez une rubrique ---</OPTION>
        {% for ville in villes %}
            <OPTION>{{ ville.nom }}</OPTION>
        {%  endfor %}
    </SELECT>

    <SELECT NAME="Page">
        <OPTION>-- Choisissez une page ---</OPTION>
        <OPTION></OPTION>
        <OPTION></OPTION>
        <OPTION></OPTION>
    </SELECT>
</form>
    <h1>Créer une Sortie</h1>

    {{ form_start(form) }}
    {{ form_row(form.nom) }}
    {{ form_row(form.dateHeureDebut) }}
    {{ form_row(form.dateLimiteInscription) }}
    {{ form_row(form.nbrePlacesMax) }}
    {{ form_row(form.duree) }}
    {{ form_row(form.description) }}
    <div>Ville organisatrice: {{ app.user.site.nom}} </div>
    {{ form_row(form.villes) }}
    {{ form_row(form.lieu) }}
    {{ form_widget(form.modifAnnul,  { 'attr' : { 'style':'display:none'} }) }}
    {{ form_widget(form.supprimer, { 'attr' : { 'style':'display:none'}}) }}



    <div>
        Rue:<br>
        Code postal:<br>
        Latitude:<br>
        Longitude:
    </div>
    {{ form_end(form) }}
    <script>
{#    function Choix(form) {#}
{#    let i = form.Rubrique.selectedIndex;#}
{#    if (i == 0) {#}
{#    return;#}
{#    }#}

{#    {% for ville in villes %}#}
{#        for (i=0;i< {{ villes|length }};i++) {#}
{#        i = {{ ville.id }}#}
{#        var txt = {{ ville.codePostal }}#}
{#        console.log(i);#}

{#        switch (i) }#}

{#            case {{ ville.id }} : var txt = new Array ('Matériel','Poissons','Sécurité'); break;#}

{#    {%  endfor %}#}
{#    // case 1 : var txt = new Array ('Matériel','Poissons','Sécurité'); break;#}
{#    // case 2 : var txt = new Array ('Radioactivité','Information','Mesures'); break;#}
{#    // case 3 : var txt = new Array ('Philosophie','Psychologie','Humour'); break;#}
{#    }#}

{#    // }#}


{#    form.Rubrique.selectedIndex = 0;#}
{#    for (i=0;i<3;i++) {#}
{#    form.Page.options[i+1].text=txt;#}
{#    }#}
{#    }#}


{#    // function Choix(form) {#}
{#    // i = form.Rubrique.value;#}
{#    // console.log(i);#}
{#    // if (i == 0) {#}
{#    // return;#}
{#    // }#}
{#    // switch (i) {#}
{#    // case "Plongée" : var txt = new Array ('Matériel','Poissons','Sécurité'); break;#}
{#    // case "Nucléaire" : var txt = new Array ('Radioactivité','Information','Mesures'); break;#}
{#    // case "Bonheur" : var txt = new Array ('Philosophie','Psychologie','Humour'); break;#}
{#    // }#}
{#    // form.Rubrique.value = i;#}
{#    // for (i=0;i<3;i++) {#}
{#    // form.Page.options[i+1].text=txt[i];#}
{#    // }#}
{#    // }#}

        function Choix(form) {
            i = form.Rubrique.value;
            console.log(i);
            if (i == "") {
                return;
            }

            cpt = 0;
            for (j = 0; j < {{ villes|length }}; j++) {
                console.log(i);
                {# var txt = {{ ville.codePostal }} #}

                switch (i) {
                        {% for ville in villes %}


                    case "{{ ville.nom }}" :
                        console.log({{ ville.nom }});-
                        var txt = new Array('Matériel', 'Poissons', 'Sécurité');
                        cpt +=cpt;
                        console.log(cpt);
                        break;

                        {% endfor %}

                }
            }

            form.Rubrique.value = i;
            for (j = 0; j < 3; j++) {
                form.Page.options[j + 1].text = txt[j];
            }
        }

    </script>
{% endblock %}
